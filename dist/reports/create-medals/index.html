<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>OC No. 3 - Medal Tally (Form & Dashboard)</title>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <style>
        /* --- BAGONG STYLES PARA SA SIDEBAR LAYOUT --- */
        body { 
            font-family: Arial, sans-serif; 
            margin: 0; 
            background-color: #f4f4f4; 
        }
        
        /* Ang Sidebar Menu */
        .sidebar {
            position: fixed;
            left: 0;
            top: 0;
            width: 260px;
            height: 100vh;
            background-color: #2c3e50;
            padding: 20px;
            box-sizing: border-box;
            color: white;
            overflow-y: auto; /* Para sa scroll kung marami nang links */
        }
        .sidebar h3 {
            text-align: center;
            margin-top: 0;
            margin-bottom: 20px;
            border-bottom: 1px solid #444;
            padding-bottom: 10px;
        }
        .sidebar a {
            display: block;
            color: #ecf0f1;
            text-decoration: none;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 10px;
            font-weight: bold;
        }
        .sidebar a:hover {
            background-color: #34495e;
        }
        /* Ito ang style para sa "active" na page */
        .sidebar a.active {
            background-color: #007bff; /* Blue */
            color: white;
        }

        /* Ang Main Content */
        .main-content {
            margin-left: 260px;
            padding: 20px;
        }
        /* ----------------------------------------------- */

        h2 { color: #333; text-align: center; }
        .page-container { display: flex; gap: 20px; max-width: 100%; margin: auto; }
        .form-column { flex: 2; min-width: 500px; background-color: #fff; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); padding: 20px; }
        .graph-column { flex: 1; min-width: 400px; }
        .sticky-wrapper { position: sticky; top: 20px; background-color: #fff; padding: 20px; border-radius: 8px; box-shadow: 0 2px 5px rgba(0,0,0,0.1); }
        form { padding: 0; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 20px; }
        .form-group { display: flex; flex-direction: column; }
        .form-group label { margin-bottom: 5px; font-weight: bold; color: #555; }
        .form-group select, .form-group input { width: 100%; padding: 10px; border: 1px solid #ccc; border-radius: 4px; box-sizing: border-box; }
        .grid-header { grid-column: 1 / -1; margin-top: 20px; margin-bottom: 0; padding-bottom: 10px; border-bottom: 2px solid #007bff; color: #0056b3; }
        .success-message { grid-column: 1 / -1; padding: 10px; background-color: #d4edda; color: #155724; border: 1px solid #c3e6cb; border-radius: 4px; }
                .sticky-wrapper h3 { margin-top: 0; }
        .filters { background-color: #f9f9f9; padding: 15px; border-radius: 8px; margin-bottom: 20px; }
        .filters select, .filters label { padding: 8px; font-size: 16px; width: 100%; margin-bottom: 10px; }
        .chart-container { width: 100%; max-width: 500px; margin: 20px auto 0 auto; }
        .scorecards { display: flex; gap: 20px; width: 100%; }
        .card { background-color: #f4f4f4; border: 1px solid #ddd; border-radius: 8px; padding: 20px; flex: 1; text-align: center; }
        .card h3 { margin-top: 0; color: #555; font-size: 1em; }
        .card .number { font-size: 2.5em; font-weight: bold; }
        .card .number.blue { color: #007bff; }
        .card .number.red { color: #dc3545; }
        .submit-button-sticky { width: 100%; padding: 12px 15px; background-color: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; font-size: 16px; font-weight: bold; margin-top: 20px; }
        .submit-button-sticky:hover { background-color: #218838; }
    </style>
</head>
<body>

    <div class="sidebar">
    <h3>NAS M&E System</h3>
    
    <a href="http://localhost" class="">Main Dashboard</a> 
    <hr style="border-color: #444;">
    
    <a href="http://localhost/reports/create" class="">OC-1: Learning Standards</a>
    <a href="http://localhost/reports/create-retention" class="">OC-2: Retention Rate</a>
    <a href="http://localhost/reports/create-medals" class="active">OC-3: Medal Tally</a>
    
    <a href="http://localhost/reports/create-athletes-trained" class="">OP-2: Athletes Trained</a>
    <a href="http://localhost/reports/create-program" class="">OP-1: Programs</a>
    <a href="http://localhost/reports/create-facility" class="">OP-3: Facilities</a>
    
    <hr style="border-color: #444;">
    <a href="http://localhost/reports/bar-report" class="" style="color: #ffd700;">BAR No. 1 Report</a>
</div>

    <div class="main-content">

        <h2>OC No. 3: Medal Tally (Entry & Monitoring)</h2>

        <form action="http://localhost/reports-medals" method="POST">
            <input type="hidden" name="_token" value="84Oa35BI9qyjuxtBNt3IYP8D3zCuxYH8bsiRDfXR" autocomplete="off">            
            <div class="page-container">

                <div class="form-column">
                    <div class="form-grid">

                                                
                        
                        <div class="form-group">
                            <label for="quarter">Quarter:</label>
                            <select name="quarter" id="quarter" required>
                                <option value="">Select Quarter</option>
                                <option value="1st Quarter">1st Quarter</option>
                                <option value="2nd Quarter">2nd Quarter</option>
                                <option value="3rd Quarter">3rd Quarter</option>
                                <option value="4th Quarter">4th Quarter</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="grade_level">Grade Level:</label>
                            <select name="grade_level" id="grade_level" required>
                                <option value="">Select Grade</option>
                                <option value="Grade 7">Grade 7</option>
                                <option value="Grade 8">Grade 8</option>
                                <option value="Grade 9">Grade 9</option>
                                <option value="Grade 10">Grade 10</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="focus_sports">Focus Sports:</label>
                            <select name="focus_sports" id="focus_sports" required>
                                <option value="">Select Sports</option>
                                <option value="AQUATICS">AQUATICS</option>
                                <option value="ATHLETICS">ATHLETICS</option>
                                <option value="BADMINTON">BADMINTON</option>
                                <option value="GYMNASTICS">GYMNASTICS</option>
                                <option value="JUDO">JUDO</option>
                                <option value="TABLE TENNIS">TABLE TENNIS</option>
                                <option value="TAEKWONDO">TAEKWONDO</option>
                            </select>
                        </div>

                        <h3 class="grid-header">National Competition</h3>
                        <div class="form-group"><label for="national_gold">Gold:</label><input type="number" name="national_gold" id="national_gold" value="0" required></div>
                        <div class="form-group"><label for="national_silver">Silver:</label><input type="number" name="national_silver" id="national_silver" value="0" required></div>
                        <div class="form-group"><label for="national_bronze">Bronze:</label><input type="number" name="national_bronze" id="national_bronze" value="0" required></div>

                        <h3 class="grid-header">International Competition</h3>
                        <div class="form-group"><label for="international_gold">Gold:</label><input type="number" name="international_gold" id="international_gold" value="0" required></div>
                        <div class="form-group"><label for="international_silver">Silver:</label><input type="number" name="international_silver" id="international_silver" value="0" required></div>
                        <div class="form-group"><label for="international_bronze">Bronze:</label><input type="number" name="international_bronze" id="international_bronze" value="0" required></div>

                    </div>
                </div>

                <div class="graph-column">
                    <div class="sticky-wrapper">
                        <h3>Medal Tally Statistics</h3>
                        
                        <div class="filters">
                            <label for="quarter_filter" style="font-weight: bold;">Quarter:</label>
                            <select id="quarter_filter" onchange="applyFilters()">
                                <option value="">All Quarters</option>
                                                            </select>

                            <label for="grade_level_filter" style="font-weight: bold;">Grade:</label>
                            <select id="grade_level_filter" onchange="applyFilters()">
                                <option value="">All Grade Levels</option>
                                                            </select>
                            
                            <label for="focus_sports_filter" style="font-weight: bold;">Sports:</label>
                            <select id="focus_sports_filter" onchange="applyFilters()">
                                <option value="">All Sports</option>
                                                            </select>
                        </div>

                        <div class="scorecards">
                            <div class="card">
                                <h3>National Medals</h3>
                                <div class="number blue">0</div>
                            </div>
                            <div class="card">
                                <h3>International Medals</h3>
                                <div class="number red">0</div>
                            </div>
                        </div>

                        <div class="chart-container">
                            <canvas id="myChart"></canvas>
                        </div>
                        
                        <button type="submit" class="submit-button-sticky">Save Medal Report</button>
                        
                        <script>
                            function applyFilters() {
                                let quarter = document.getElementById('quarter_filter').value;
                                let grade = document.getElementById('grade_level_filter').value;
                                let sport = document.getElementById('focus_sports_filter').value;
                                let url = `http://localhost/reports/create-medals?quarter=${encodeURIComponent(quarter)}&grade_level=${encodeURIComponent(grade)}&focus_sports=${encodeURIComponent(sport)}`;
                                window.location.href = url;
                            }
                        
                            const chartData = {"labels":["Gold","Silver","Bronze"],"datasets":[{"label":"National","data":["0","0","0"],"backgroundColor":"rgba(54, 162, 235, 0.7)"},{"label":"International","data":["0","0","0"],"backgroundColor":"rgba(255, 99, 132, 0.7)"}]};
                            const ctx = document.getElementById('myChart').getContext('2d');
                            const myChart = new Chart(ctx, {
                                type: 'bar',
                                data: { labels: chartData.labels, datasets: chartData.datasets },
                                options: {
                                    responsive: true,
                                    plugins: { legend: { position: 'top' }, title: { display: true, text: 'Medal Tally: National vs. International' } },
                                    scales: { y: { beginAtZero: true, title: { display: true, text: 'Number of Medals' } } }
                                }
                            });
                        </script>
                    </div> 
                </div> 
            </div> 
        </form>

    </div> </body>
</html>